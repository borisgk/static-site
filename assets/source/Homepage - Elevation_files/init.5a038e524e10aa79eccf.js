/*! For license information please see init.5a038e524e10aa79eccf.js.LICENSE.txt */
!function(){"use strict";var e,t,r={900:function(e,t,r){r.d(t,{in:function(){return o},jj:function(){return s}});var n,o,i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(o||(o={}));var s=((n={})[o.DEBUG]="debug",n[o.INFO]="info",n[o.WARN]="warn",n[o.ERROR]="error",n),c=new function(){var e=this;this.loggingLevel=null,this.middlewares=[],this.debug=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.DEBUG,t],i(r),!1)),null!==e.loggingLevel&&o.DEBUG>=e.loggingLevel&&console.debug.apply(console,a([t],i(r),!1))},this.debugNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.DEBUG,t],i(r),!1))},this.error=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.ERROR,t],i(r),!1)),null!==e.loggingLevel&&o.ERROR>=e.loggingLevel&&console.error.apply(console,a([t],i(r),!1))},this.errorNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.ERROR,t],i(r),!1))},this.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.INFO,t],i(r),!1)),null!==e.loggingLevel&&o.INFO>=e.loggingLevel&&console.log.apply(console,a([t],i(r),!1))},this.infoNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.INFO,t],i(r),!1))},this.setLoggingLevel=function(t){e.loggingLevel=t},this.setMiddleware=function(t){e.middlewares.push(t)},this.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["console",o.WARN,t],i(r),!1)),null!==e.loggingLevel&&o.WARN>=e.loggingLevel&&console.warn.apply(console,a([t],i(r),!1))},this.warnNoConsole=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.processMiddlewares.apply(e,a(["internal",o.WARN,t],i(r),!1))},this.processMiddlewares=function(t,r,n){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];e.middlewares.forEach((function(e){return e.apply(void 0,a([t,r,n],i(o),!1))}))}};t.ZP=c},864:function(e,t,r){r.d(t,{VZ:function(){return n},c_:function(){return i},vq:function(){return o}});var n=function(e){var t,r;return null!==e&&"object"==typeof e&&(e instanceof Error||(null===(t=e.constructor.name)||void 0===t?void 0:t.endsWith("Error"))||(null===(r=e.constructor.name)||void 0===r?void 0:r.endsWith("Exception")))},o=function(e){return n(e)&&(e instanceof SyntaxError||"SyntaxError"===e.constructor.name)},i=function(e){return n(t=e)&&(t instanceof DOMException||"DOMException"===t.constructor.name)&&"SecurityError"===e.name;var t}},966:function(e,t,r){r.d(t,{L:function(){return o},h:function(){return n}});var n=function(e){return null!==e&&"object"==typeof e&&"FormData"===e.constructor.name},o=function(e){return null!==e&&"object"==typeof e&&"Blob"===e.constructor.name}},34:function(e,t,r){r.d(t,{N:function(){return n}});var n=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return console.warn.apply(console,function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}(["[ðŸŽ¥ Smartlook] ".concat(e)],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}(t),!1))}},790:function(e,t,r){r.d(t,{Lq:function(){return o},ey:function(){return i},oF:function(){return n}});var n=function(e){var t,r,n=null;try{n=null!==(r=null===(t=e.defaultView)||void 0===t?void 0:t.frameElement)&&void 0!==r?r:null}catch(e){}return n},o=function(e){try{return e.contentDocument}catch(e){}return null},i=function(e){var t,r=null;try{r=null!==(t=e.frameElement)&&void 0!==t?t:null}catch(e){}return r}},373:function(e,t,r){r.d(t,{R:function(){return i},u:function(){return n}});var n=function(e,t){var r,n=new URL(/^https?:\/\//.test(r=e)?r:"https://".concat(r));if(!t)return n;var o=n.pathname;return o.endsWith("/")&&t.startsWith("/")&&(o=o.slice(0,-1)),new URL("".concat(o).concat(t),n.origin)},o=[/:\/\/10(\.\w+){3}(:\w+)?\//,/:\/\/172\.(16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31).\w+\.\w+(:\w+)?\//,/:\/\/192\.168(\.\w+){2}(:\w+)?\//,/:\/\/localhost(:\w+)?\//,/:\/\/127\.0\.0\.1(:\w+)?\//,/^file:\/{3}/],i=function(e){return o.some((function(t){return t.test(e)}))}},286:function(e,t,r){r.d(t,{MN:function(){return n},PA:function(){return i},PJ:function(){return o},Yp:function(){return a}});var n=function(){return window.top===window},o=function(){return window.top!==window&&(window.top===window.parent||void 0)},i=function(e){try{return Boolean(e.location.href)}catch(e){return!1}},a=function(){if(n())return!1;try{return Boolean(window.frameElement)}catch(e){return!1}}},729:function(e,t,r){r.d(t,{t$:function(){return b},E0:function(){return S},BH:function(){return w},jq:function(){return R},x2:function(){return k},O5:function(){return m},iY:function(){return O},R2:function(){return E}});var n=r(373),o=r(900),i=r(370),a=function(){return t=function(){return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(e){switch(e.label){case 0:return navigator.onLine?[3,2]:[4,new Promise((function(e){var t=function(){window.removeEventListener("online",t),e()};window.addEventListener("online",t),navigator.onLine&&(e(),window.removeEventListener("online",t))}))];case 1:e.sent(),e.label=2;case 2:return[2]}}))},new((e=void 0)||(e=Promise))((function(r,n){function o(e){try{a(t.next(e))}catch(e){n(e)}}function i(e){try{a(t.throw(e))}catch(e){n(e)}}function a(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(e){e(n)}))).then(o,i)}a((t=t.apply(void 0,[])).next())}));var e,t},s=r(429),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},d={headers:{}},f={"Content-Type":"text/plain;charset=UTF-8"},p=new Map,y=function(e,t){return u(void 0,void 0,void 0,(function(){var r,u,y,g,v,h,m,w,b,S,O,E=t.abortPreviousRequest,R=t.body,k=t.headers,A=t.baseUrl,L=t.throwOnConvert,T=void 0!==L&&L,I=t.retryCount,_=void 0===I?3:I,C=t.retryInterval,M=void 0===C?1e3:C,P=t.logPayloadOnError,K=void 0!==P&&P,D=t.waitForOnlineStatus,x=void 0!==D&&D,j=t.doNotRetryOnDocumentHidden,N=void 0!==j&&j,B=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["abortPreviousRequest","body","headers","baseUrl","throwOnConvert","retryCount","retryInterval","logPayloadOnError","waitForOnlineStatus","doNotRetryOnDocumentHidden"]);return l(this,(function(t){switch(t.label){case 0:r=n.u(A,e),(u=p.get(r.href))&&E&&(o.ZP.debug("Aborting previous request",r),u.abort("Aborted previous request.")),u=new AbortController,p.set(r.href,u),y=c(c(c(c({},d),{body:R}),B),{signal:u.signal}),void 0===k&&(y.headers=f),v=null,h=performance.now(),m=0,w=-1,S=function(e){var t,n,o,c,d,f;return l(this,(function(l){switch(l.label){case 0:return x?[4,a()]:[3,2];case 1:l.sent(),l.label=2;case 2:w=e,l.label=3;case 3:return l.trys.push([3,11,12,13]),1!==e?[3,5]:(h=performance.now(),[4,fetch(r.href,y)]);case 4:return g=l.sent(),[3,10];case 5:return t=new Promise((function(t){setTimeout((function(){t()}),M*Math.pow(2,e-1))})),n=new Promise((function(e){var t=function(){"hidden"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())};document.addEventListener("visibilitychange",t),"hidden"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),e())})),[4,Promise.race([t,n])];case 6:if(l.sent(),N&&"hidden"===document.visibilityState)throw new Error("Document is hidden and flag `doNotRetryOnDocumentHidden` is set to true.");return x?[4,a()]:[3,8];case 7:l.sent(),l.label=8;case 8:return h=performance.now(),[4,fetch(r.href,y)];case 9:g=l.sent(),l.label=10;case 10:return b=void 0,[3,13];case 11:if(o=l.sent(),b=o,o instanceof Error&&"AbortError"===o.name)throw p.delete(r.href),new s.M("Request was aborted.",-1,{fetchTotalMs:m,finalRetries:w},u.signal,K?JSON.stringify(R):"Payload not logged.",void 0,o);return e<_&&(!N||"hidden"!==document.visibilityState)?[2,"continue"]:[3,13];case 12:return m=performance.now()-h,[7];case 13:if(p.delete(r.href),!g)throw new s.M("API request to ".concat(r.href," failed due to connection error."),-1,{fetchTotalMs:m,finalRetries:w},u.signal,K?JSON.stringify(R):"Payload not logged.",void 0,b);if(!(g.status>399))return[3,22];l.label=14;case 14:return l.trys.push([14,16,,17]),[4,g.json()];case 15:return v=l.sent(),[3,17];case 16:if((c=l.sent())instanceof Error&&("AbortError"===c.name||"TypeError"===c.name))throw new s.M("API request to ".concat(r.href," failed with status code ").concat(g.status,"."),g.status,{fetchTotalMs:m,finalRetries:w},u.signal,"Payload not logged.",g,c);return[3,17];case 17:return l.trys.push([17,20,,21]),v?[3,19]:[4,g.text()];case 18:v=l.sent(),l.label=19;case 19:return[3,21];case 20:if((d=l.sent())instanceof Error&&("AbortError"===d.name||"TypeError"===d.name))throw new s.M("API request to ".concat(r.href," failed with status code ").concat(g.status,"."),g.status,{fetchTotalMs:m,finalRetries:w},u.signal,"Payload not logged.",g,d);return[3,21];case 21:throw new s.M("API request to ".concat(r.href," failed with status code ").concat(g.status),g.status,{fetchTotalMs:m,finalRetries:w},u.signal,K?JSON.stringify(R):"Payload not logged.",g,void 0,{responseData:v});case 22:if(204===g.status)return[2,"break"];l.label=23;case 23:return l.trys.push([23,25,,26]),[4,g.json()];case 24:return v=l.sent(),[2,"break"];case 25:if((f=l.sent())instanceof Error&&("AbortError"===f.name||"TypeError"===f.name)&&e<_)return[2,"continue"];if(T&&f instanceof Error)throw"AbortError"===f.name||"TypeError"===f.name?new s.M("API request to ".concat(r.href," failed due to connection error."),-1,{fetchTotalMs:m,finalRetries:w},u.signal,K?JSON.stringify(R):"Payload not logged.",void 0,b):new i.iF("Could not convert data to JSON in ".concat(r.href," request"),{originalError:f,additionalData:{status:g.status,originalErrorName:f.name,originalErrorMessage:f.message,fetchTotalMs:m,finalRetries:w,url:g.url,bodyUsed:g.bodyUsed,ok:g.ok,headers:g.headers?Array.from(g.headers):void 0,type:g.type,redirected:g.redirected,visibility:document.visibilityState,online:navigator.onLine}});if(T)throw new i.iF("Unknown error happened during API call. ".concat(JSON.stringify(f)));return[2,"break"];case 26:return[2]}}))},O=1,t.label=1;case 1:return O<=_?[5,S(O)]:[3,4];case 2:if("break"===t.sent())return[3,4];t.label=3;case 3:return O++,[3,1];case 4:if(void 0===g)throw new i.iF("Response object is undefined.",{shouldReport:!0});return[2,{data:v,response:g}]}}))}))},g=function(e,t){var r=t.baseUrl,o=t.body,i=t.waitForOnlineStatus,s=t.retryCount,c=void 0===s?1:s;return u(void 0,void 0,void 0,(function(){var t,s,u;return l(this,(function(l){switch(l.label){case 0:t=n.u(r,e),s=navigator.sendBeacon.bind(navigator),l.label=1;case 1:return c>0?i?[4,a()]:[3,3]:[3,11];case 2:l.sent(),l.label=3;case 3:return l.trys.push([3,4,9,10]),s(t.href,o)?[2,!0]:[3,1];case 4:if(!((u=l.sent())instanceof TypeError&&"Illegal invocation"===u.message))return[3,8];l.label=5;case 5:return l.trys.push([5,7,,8]),[4,fetch(t.href,{method:"POST",body:o,keepalive:!0})];case 6:return l.sent(),[2,!0];case 7:return l.sent(),[2,!1];case 8:throw u;case 9:return c-=1,[7];case 10:return[3,1];case 11:return[2,!1]}}))}))},v=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},h=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},m=function(e){var t=e.config,r=e.sessionId,o=e.visitorId;return v(void 0,void 0,void 0,(function(){var e,i,a,s;return h(this,(function(c){switch(c.label){case 0:return e={key:t.projectKey,sessionId:r,visitorId:o},t.userId&&(e.userId=t.userId),[4,y("/rec/setup-recording/website",{method:"POST",baseUrl:t.managerHost,body:JSON.stringify(e),abortPreviousRequest:!1,throwOnConvert:!0,credentials:"include",logPayloadOnError:!0})];case 1:return i=c.sent(),a=i.data,s=i.response,a.ok&&a.recordingAllowed?(t.isRelayProxy&&(a.recording.assetsHost=n.u(t.host,"/assets").toString(),a.recording.writerHost=n.u(t.host,"/web-writer").toString()),[2,{setupData:a,response:s}]):[2,{setupData:a,response:s}]}}))}))},w=function(e){var t=e.managerHost,r=e.sessionId,n=e.projectKey;return v(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,y("/rec/sessions/".concat(r,"/active?projectKey=").concat(n),{method:"GET",baseUrl:t,abortPreviousRequest:!0,throwOnConvert:!0})];case 1:return[2,e.sent().data]}}))}))},b=function(e){var t=e.assetsHost,r=e.urls;return v(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,y("/cache",{method:"POST",baseUrl:t,body:JSON.stringify(r),abortPreviousRequest:!1,waitForOnlineStatus:!0})];case 1:return e.sent(),[2]}}))}))},S=function(e){var t=e.assetsHost,r=e.urls;return g("/cache",{baseUrl:t,body:JSON.stringify(r)})},O=function(e){var t=e.formData,r=e.writerHost,n=e.recordId,o=e.sessionId,i=e.visitorId,a=e.isFromPreviousRecord;return v(void 0,void 0,void 0,(function(){var e,s;return h(this,(function(c){switch(c.label){case 0:return e="/rec/v3/write",window.URLSearchParams&&(s=new URLSearchParams([["rid",n],["sid",o],["vid",i]]),a&&s.append("isFromPreviousRecord","true"),e+="?".concat(s.toString())),[4,y(e,{method:"POST",baseUrl:r,body:t,headers:{},abortPreviousRequest:!1,waitForOnlineStatus:!0,doNotRetryOnDocumentHidden:!0})];case 1:return[2,c.sent().data]}}))}))},E=function(e){var t=e.formData,r=e.writerHost,n=e.recordId,o=e.sessionId,i=e.visitorId,a=e.isPartialChunk,s=e.retryCount,c="/rec/v3/write";if(window.URLSearchParams){var u=new URLSearchParams([["rid",n],["sid",o],["vid",i],["isPartialChunk",String(a)]]);a||u.delete("isPartialChunk"),c+="?".concat(u.toString())}return g(c,{baseUrl:r,body:t,retryCount:s,waitForOnlineStatus:!0})},R=function(e){var t=e.datadogHost,r=e.payload,n=e.projectKey;return v(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,y("/rec/log/".concat(n),{method:"POST",baseUrl:t,body:JSON.stringify(r),abortPreviousRequest:!1,throwOnConvert:!1})];case 1:return e.sent(),[2]}}))}))},k=function(e){var t=e.datadogHost,r=e.payload,n=e.projectKey;return g("/rec/log/".concat(n),{baseUrl:t,body:JSON.stringify(r)})}},429:function(e,t,r){r.d(t,{M:function(){return i}});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(r,n,o,i,a,s,c,u,l){var d=e.call(this,r)||this;return d.status=n,d.responseTimingData=o,d.requestPayload=a,d.originalError=c,d.responseData=u,d.additionalData=l,d.name="ApiError",Object.setPrototypeOf(d,t.prototype),d.responseDebugData=s?function(e){return{url:e.url,bodyUsed:e.bodyUsed,ok:e.ok,headers:e.headers?Array.from(e.headers):void 0,type:e.type,redirected:e.redirected}}(s):void 0,d.isSignalAborted=null==i?void 0:i.aborted,d.visibilityState=document.visibilityState,d.isOffline=!1===navigator.onLine,d.wasBeaconFallbackUsed=!1,d}return o(t,e),Object.defineProperty(t.prototype,"isConnectionError",{get:function(){return this.status<0&&!this.isAbortedByRecorder&&!this.isAbortedByUserAgent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAbortedByRecorder",{get:function(){return this.isSignalAborted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAbortedByUserAgent",{get:function(){var e;return this.originalError instanceof Error&&"AbortError"===(null===(e=this.originalError)||void 0===e?void 0:e.name)&&!this.isSignalAborted},enumerable:!1,configurable:!0}),t}(Error)},959:function(e,t,r){var n;r.d(t,{LT:function(){return i},hd:function(){return a},lL:function(){return n},ot:function(){return o}}),function(e){e.ACKNOWLEDGED="SL__ACKNOWLEDGED",e.DISCOVERY="SL__DISCOVERY",e.DISCOVERED="SL__DISCOVERED",e.USER_ACTIVITY="SL__USER_ACTIVITY",e.STOP_RECORDING="SL__STOP_RECORD",e.START_RECORDING="SL__START_RECORDING"}(n||(n={}));var o=function(e){if(e&&"object"==typeof e&&Object.hasOwn(e,"name")){var t=e.name;if("string"==typeof t&&t.startsWith("SL__"))return!0}return!1},i=function(e){return e.name===n.DISCOVERY},a=function(e){return e.name===n.DISCOVERED}},370:function(e,t,r){r.d(t,{Fx:function(){return c},iF:function(){return s},zT:function(){return u}});var n,o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e){function t(r,n){var o=void 0===n?{}:n,i=o.shouldReport,a=void 0===i||i,s=o.additionalData,c=void 0===s?{}:s,u=o.originalError,l=e.call(this,r)||this;return Object.setPrototypeOf(l,t.prototype),l.name="RecorderError",l.additionalData=c,l.shouldReport=a,u&&(l.originalName=u.name,l.originalStack=u.stack,l.originalMessage=u.message,l.originalError=u),u instanceof t&&(l.originalAdditionalData=u.additionalData),l}return o(t,e),t.prototype.toJSON=function(){return{name:this.name,originalName:this.originalName,message:this.message,shouldReport:this.shouldReport,additionalData:this.additionalData,stack:this.stack,originalStack:this.originalStack,originalAdditionalData:this.originalAdditionalData,originalMessage:this.originalMessage,originalError:this.originalError}},t}(Error),c=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,a([],i(r),!1))||this;return Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t}(s),u=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,a([],i(r),!1))||this;return Object.setPrototypeOf(o,t.prototype),o}return o(t,e),t}(s)},665:function(e,t,r){r.d(t,{$:function(){return n}});var n=function(e){return void 0===e.isTrusted||e.isTrusted}},219:function(e,t,r){r.d(t,{O:function(){return n}});var n=function(){return void 0===e&&(e=21),crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")}),"");var e}},452:function(e,t,r){r.d(t,{KB:function(){return d},dD:function(){return f}});var n=r(900),o=r(729),i=r(429),a=r(370),s=r(219),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},l=function(e,t,r){return c(void 0,void 0,void 0,(function(){var s;return u(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),n.ZP.debug("Calling active endpoint in init."),[4,(0,o.BH)({sessionId:e,managerHost:t.managerHost,projectKey:t.projectKey})];case 1:return[2,c.sent()];case 2:return(s=c.sent())instanceof i.M?(s.isConnectionError||n.ZP.warn("/active call failed on network error.",s),404===s.status&&r.clearStorage()):s instanceof a.iF?s.shouldReport&&n.ZP.warn("/active call failed on recorder error.",s):n.ZP.warn("/active call failed on unknown error.",s),[3,3];case 3:return[2,null]}}))}))},d=function(e,t){var r,n,o,i,a=[],s=t.getCookieMetadataForProjectKey(e.projectKey);a.push({sessionId:null!==(r=null==s?void 0:s.sessionId)&&void 0!==r?r:null,visitorId:null!==(n=null==s?void 0:s.visitorId)&&void 0!==n?n:null});var c=t.getLocalStorageMetadataForProjectKey(e.projectKey),u=null!==(o=null==c?void 0:c.sessionId)&&void 0!==o?o:null,l=null!==(i=null==c?void 0:c.visitorId)&&void 0!==i?i:null;return a[0].sessionId===u&&a[0].visitorId===l||a.push({sessionId:u,visitorId:l}),a},f=function(e,t,r,n){return void 0===n&&(n=[]),c(void 0,void 0,void 0,(function(){var o,i,a,c,d,f,p,y,g,v;return u(this,(function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=o.next(),u.label=1;case 1:return i.done?[3,4]:(a=i.value).sessionId?n.includes(a.sessionId)?[3,3]:[4,l(a.sessionId,t,r)]:[3,3];case 2:if(null==(c=u.sent())?void 0:c.isActive)return[2,{sessionId:a.sessionId,visitorId:null!==(y=a.visitorId)&&void 0!==y?y:(0,s.O)(),sessionTimeRemaining:c.sessionTimeRemaining}];u.label=3;case 3:return i=o.next(),[3,1];case 4:return[3,7];case 5:return d=u.sent(),f={error:d},[3,7];case 6:try{i&&!i.done&&(p=o.return)&&p.call(o)}finally{if(f)throw f.error}return[7];case 7:return[2,{sessionId:(0,s.O)(),visitorId:null!==(v=null===(g=e.find((function(e){return null!==e.visitorId})))||void 0===g?void 0:g.visitorId)&&void 0!==v?v:(0,s.O)()}]}}))}))}},600:function(e,t,r){r.d(t,{P:function(){return c},v:function(){return u}});var n=r(966),o=r(864),i=r(664),a=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},c=function(e,t){try{return(0,i.K)(u(e),t).stringified}catch(e){return JSON.stringify("[non-serializable object]")}},u=function(e,t){return void 0===t&&(t=new WeakMap),Array.isArray(e)?e.map((function(e){return u(e,t)})):"object"==typeof e&&null!==e?l(e,t):["function","symbol","bigint","undefined"].includes(typeof e)?typeof e:null===e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)},l=function(e,t){var r,i=Object.keys(e);if(n.h(e)){var c={};e.forEach((function(e,t){c[t]="string"==typeof e?e:"[file:".concat(e.type,"][").concat(e.name,"]")})),r=c}else if(o.VZ(e)&&!Object.hasOwn(e,"toJSON"))r=f(e);else if(1===i.length&&"isTrusted"===i[0]){var u=Object.keys(Object.getPrototypeOf(e));r=JSON.parse(JSON.stringify(e,s(s([],a(i),!1),a(u),!1)))}else r=d(t,e);return r},d=function(e,t){var r,n;if(e.has(t))return"[circular]";e.set(t,!0);var o=[];try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Object.entries(t)),s=i.next();!s.done;s=i.next()){var c=a(s.value,2),l=c[0],d=c[1];o.push([l,u(d,e)])}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return Object.fromEntries(o)},f=function(e){var t=JSON.parse(JSON.stringify(e));return t.name||(t.name=e.name),t.stack||(t.stack=e.stack),t.message||(t.message=e.message),t}},664:function(e,t,r){r.d(t,{K:function(){return s}});var n=r(600),o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a="[smartlook-truncated]",s=function(e,t){void 0===t&&(t=16384);var r=JSON.stringify(e);return r.length<=t?{isTruncated:!1,stringified:r}:(Array.isArray(e)?r=function(e,t){var r,i,s="";try{for(var c=o(e),u=c.next();!u.done;u=c.next()){var l=u.value;if(t<=0){s+=JSON.stringify(a)+",";break}var d=(0,n.P)(l,t)+",";s+=d,t-=d.length}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return"["+s.slice(0,Math.max(0,s.length-1))+"]"}(e,t):"object"==typeof e&&null!==e?r=function(e,t){var r,s,c="";try{for(var u=o(Object.entries(e)),l=u.next();!l.done;l=u.next()){var d=i(l.value,2),f=d[0],p=d[1];if(t<=0){c+=JSON.stringify(a)+":true,";break}var y='"'.concat(f,'":').concat((0,n.P)(p,t),",");c+=y,t-=y.length}}catch(e){r={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return"{"+c.slice(0,Math.max(0,c.length-1))+"}"}(e,t):"string"==typeof e?r=JSON.stringify(a+"[string] "+e.slice(0,Math.max(0,t))):"number"==typeof e&&(r=JSON.stringify(a+"[number] "+String(e).slice(0,Math.max(0,t)))),{isTruncated:!0,stringified:r})}},904:function(e,t,r){r.d(t,{X:function(){return u}});var n=r(790),o=r(900),i=r(959),a=r(665),s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=["mousemove","click","keypress","touchmove","drag","wheel","mouseover"],u=function(e){return r=function(){var t,r,u,l,d,f,p,y,g,v,h,m,w,b,S;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(O){switch(O.label){case 0:t=Array.from(document.querySelectorAll("iframe")),r=[document];try{for(u=s(t),l=u.next();!l.done;l=u.next())d=l.value,(f=n.Lq(d))&&r.push(f)}catch(e){m={error:e}}finally{try{l&&!l.done&&(w=u.return)&&w.call(u)}finally{if(m)throw m.error}}return p=[],y=c.map((function(e){return new Promise((function(t){var n,o,i=function(e){(0,a.$)(e)&&t()},c=function(t){p.push((function(){return t.removeEventListener(e,i,!0)})),t.addEventListener(e,i,!0)};try{for(var u=s(r),l=u.next();!l.done;l=u.next())c(l.value)}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}))})),e&&y.push(e.waitForEventFromAnySource(i.lL.USER_ACTIVITY)),[4,Promise.any(y)];case 1:O.sent();try{for(g=s(p),v=g.next();!v.done;v=g.next()){h=v.value;try{h()}catch(e){o.ZP.debug("Listener could not be removed",e)}}}catch(e){b={error:e}}finally{try{v&&!v.done&&(S=g.return)&&S.call(g)}finally{if(b)throw b.error}}return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function o(e){try{a(r.next(e))}catch(e){n(e)}}function i(e){try{a(r.throw(e))}catch(e){n(e)}}function a(r){var n;r.done?e(r.value):(n=r.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}a((r=r.apply(void 0,[])).next())}));var t,r}}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e](i,i.exports,o),i.exports}o.m=r,o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,r){return o.f[r](e,t),t}),[]))},o.u=function(e){return"bundle.563f47da19c20606ad71.js"},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="@smartlook/recorder:",o.l=function(r,n,i,a){if(e[r])e[r].push(n);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[n];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="",function(){var e={410:0};o.f.j=function(t,r){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((function(r,o){n=e[t]=[r,o]}));r.push(n[2]=i);var a=o.p+o.u(t),s=new Error;o.l(a,(function(r){if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var n,i,a=r[0],s=r[1],c=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);c&&c(o)}for(t&&t(r);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk_smartlook_recorder=self.webpackChunk_smartlook_recorder||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e,t,r,n,i=o(900),a=o(34),s=o(286),c=o(729),u=o(429),l=o(373),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},f={eu:"manager.eu.smartlook.cloud",us:"manager.us.smartlook.cloud"},p={advancedNetwork:!1,banTime:3e5,enableCompression:!0,enableRecordingOfAutomationFrameworks:!1,externalLogging:!0,fallbackToAlternativeIds:!1,forceSetupData:null,host:f.eu,managerHost:f.eu,upload:function(){return null},cookies:!0,loggingLevel:i.in.ERROR,userId:null,uploadInterval:7500,proxyAllImages:!1,record:{},region:"eu",startRecordingAfterUserActivity:!0,storageKeys:{SMARTLOOK_BAN_EXPIRE:"smartlook_ban_expire",SMARTLOOK_BAN_REASON:"smartlook_ban_reason",SMARTLOOK_COOKIE:"SL_C_23361dd035530_SID",SMARTLOOK_COOKIE_DOMAIN:"SL_C_23361dd035530_DOMAIN",SMARTLOOK_LS:"SL_L_23361dd035530_SID",SMARTLOOK_LS_QUEUED_CHUNKS:"smartlook_queued_chunks",SMARTLOOK_DEBUG:"smartlook_debug",SMARTLOOK_LEGACY_COOKIE_KEY:"SL_C_23361dd035530_KEY",SMARTLOOK_LEGACY_COOKIE_SID:"SL_C_23361dd035530_SID",SMARTLOOK_LEGACY_COOKIE_VID:"SL_C_23361dd035530_VID",SMARTLOOK_LEGACY_LS_KEY:"SL_L_23361dd035530_KEY",SMARTLOOK_LEGACY_LS_SID:"SL_L_23361dd035530_SID",SMARTLOOK_LEGACY_LS_VID:"SL_L_23361dd035530_VID",SMARTLOOK_LEGACY_SETUP_RETRY_AFTER:"smartlook_setup_retry_after",SMARTLOOK_LEGACY_SETUP_RETRY_AFTER_REASON:"smartlook_setup_retry_after_reason"},isRelayProxy:!1,isSmartsupp:!1,interceptors:{},isCrossOriginIframeMode:!1,packAssets:!1,packAssetsToRecording:!1,standalone:!1},y=o(959),g=o(370),v=o(219),h=o(452),m=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},b=function(){return!!s.Yp()&&window.parent&&void 0!==window.parent.smartlook},S=function(e){return!(!window.parent||!window.parent.smartlook||"string"!=typeof window.parent.smartlook.key||window.parent.smartlook.key!==e)},O=o(904),E=function(e,t){for(var r=e.domain,n=r.split("."),o=0;o<n.length-1&&!e.cookie.includes("".concat(t,"=true"));)o+=1,r=n.slice(-1-o).join("."),e.cookie="".concat(t,"=true;domain=").concat(r,";path=/;sameSite=strict;secure");return e.cookie="".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(r,";path=/;sameSite=strict;secure"),r},R=function(){function e(t,r){var n=this;this.storageKeys=t,this.useCookies=r,this.getCookieData=function(){n.convertDeprecatedCookieDataIfNeeded();var t=e.getCookie(n.storageKeys.SMARTLOOK_COOKIE);try{return JSON.parse(null!=t?t:"{}")}catch(e){return{}}},this.convertWrongCookies(),this.convertDeprecatedCookieData()}return e.prototype.clearCookies=function(){this.useCookies&&this.removeCookie(this.storageKeys.SMARTLOOK_COOKIE)},e.prototype.getCookieMetadataForProjectKey=function(e){var t;return this.useCookies&&(null!==(t=this.getCookieData()[e])&&void 0!==t?t:null)||null},e.prototype.setCookieProjectMetadata=function(e,t){if(this.useCookies){var r=this.getCookieData();r[e]=t,this.setCookie(this.storageKeys.SMARTLOOK_COOKIE,JSON.stringify(r))}},e.getAllCookies=function(e){var t=document.cookie.split(";"),r=[];try{for(var n=0;n<t.length;n+=1){var o=t[n].trim().split("=");o[0]===e&&r.push(o[1])}}catch(e){}return r},e.getAllValuesOfCookieAndRemoveIt=function(t){var r=window.document.domain,n=e.getAllCookies(t);try{for(var o=r.split("."),a=0;a<o.length-1&&window.document.cookie.includes("".concat(t));)a+=1,r=o.slice(-1-a).join("."),window.document.cookie="".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(r,";path=/;sameSite=strict;secure")}catch(e){i.ZP.errorNoConsole("Removing cookies failed.",e)}return n.reverse()},e.getCookie=function(e){var t=document.cookie.split(";");try{for(var r=0;r<t.length;r+=1){var n=t[r].trim().split("=");if(n[0]===e)return n[1]}}catch(e){}return null},e.getCookieExpirationDate=function(){var e=new Date;return e.setMonth(e.getMonth()+13),e.toUTCString()},e.prototype.convertDeprecatedCookieData=function(){var t,r=e.getCookie(this.storageKeys.SMARTLOOK_COOKIE),n=r&&r.startsWith("{")&&r.endsWith("}"),o=e.getCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_KEY),i=e.getCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_VID),a=!1;if(!n&&r&&o&&i){var s=((t={})[o]={sessionId:r,visitorId:i},t);this.setCookie(this.storageKeys.SMARTLOOK_COOKIE,JSON.stringify(s)),a=!0}n||a||this.removeCookie(this.storageKeys.SMARTLOOK_COOKIE),this.removeCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_KEY),this.removeCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_VID)},e.prototype.convertDeprecatedCookieDataIfNeeded=function(){e.getCookie(this.storageKeys.SMARTLOOK_COOKIE)||this.convertDeprecatedCookieData()},e.prototype.convertWrongCookies=function(){var t=e.getAllValuesOfCookieAndRemoveIt(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_SID);t.length>0&&this.setCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_SID,t[0]);var r=e.getAllValuesOfCookieAndRemoveIt(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_VID);r.length>0&&this.setCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_VID,r[0]);var n=e.getAllValuesOfCookieAndRemoveIt(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_KEY);n.length>0&&this.setCookie(this.storageKeys.SMARTLOOK_LEGACY_COOKIE_KEY,n[0])},e.prototype.removeCookie=function(e){window.document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(E(document,this.storageKeys.SMARTLOOK_COOKIE_DOMAIN),";path=/")},e.prototype.setCookie=function(t,r){r&&(window.document.cookie="".concat(t,"=").concat(r,";expires=").concat(e.getCookieExpirationDate(),";domain=").concat(E(document,this.storageKeys.SMARTLOOK_COOKIE_DOMAIN),";path=/;sameSite=strict;secure"))},e}(),k=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(e){}return t},A=function(e,t){try{return window.localStorage.setItem(e,t),!0}catch(e){return!1}},L=function(e){try{window.localStorage.removeItem(e)}catch(e){}},T=function(){return T=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},I=function(){function e(e,t){var r=this;this.projectKey=e,this.storageKeys=t,this.getLocalStorageData=function(){r.convertDeprecatedLocalStorageDataIfNeeded();var e=k(r.storageKeys.SMARTLOOK_LS);try{return JSON.parse(null!=e?e:"{}")}catch(e){return{}}},this.getLocalStorageProjectMetadata=function(e){var t;return null!==(t=r.getLocalStorageData()[e])&&void 0!==t?t:null},this.removeFromLocalStorageProjectMetadata=function(e,t){var n=r.getLocalStorageData();n[e]&&(delete n[e][t],A(r.storageKeys.SMARTLOOK_LS,JSON.stringify(n)))},this.updateLocalStorageProjectMetadata=function(e,t){var n=r.getLocalStorageData();n[e]=T(T({},n[e]),t),A(r.storageKeys.SMARTLOOK_LS,JSON.stringify(n))},this.convertDeprecatedLocalStorageData()}return e.prototype.clearLocalStorage=function(){L(this.storageKeys.SMARTLOOK_LS),L(this.storageKeys.SMARTLOOK_BAN_REASON),L(this.storageKeys.SMARTLOOK_BAN_EXPIRE),L(this.storageKeys.SMARTLOOK_DEBUG)},e.prototype.getBanExpire=function(){return k(this.storageKeys.SMARTLOOK_BAN_EXPIRE)},e.prototype.getBanReason=function(){return k(this.storageKeys.SMARTLOOK_BAN_REASON)},e.prototype.getLocalStorageMetadataForProjectKey=function(e){var t=this.getLocalStorageProjectMetadata(e);return t?{sessionId:t.sessionId,visitorId:t.visitorId}:null},e.prototype.getQueuedChunks=function(){var e=k(this.storageKeys.SMARTLOOK_LS_QUEUED_CHUNKS);if(e)try{var t=JSON.parse(e);if(Array.isArray(t))return t}catch(e){i.ZP.warnNoConsole("Cannot get queued chunk from local storage.",e)}return null},e.prototype.getSetupRetryAfterExpire=function(){var e,t=this.getLocalStorageProjectMetadata(this.projectKey);return null!==(e=null==t?void 0:t.setupRetryAfter)&&void 0!==e?e:null},e.prototype.getSetupRetryAfterExpireReason=function(){var e,t=this.getLocalStorageProjectMetadata(this.projectKey);return null!==(e=null==t?void 0:t.setupRetryAfterReason)&&void 0!==e?e:null},e.prototype.isRecorderInDebugMode=function(){return Boolean(k(this.storageKeys.SMARTLOOK_DEBUG))},e.prototype.queueChunkToSend=function(e){var t=k(this.storageKeys.SMARTLOOK_LS_QUEUED_CHUNKS),r=[];if(t)try{var n=JSON.parse(t);Array.isArray(n)&&r.push.apply(r,function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}([],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}(n),!1))}catch(e){i.ZP.warnNoConsole("Cannot parse queued chunk from local storage.",e)}return r.push(e),A(this.storageKeys.SMARTLOOK_LS_QUEUED_CHUNKS,JSON.stringify(r))},e.prototype.removeBanExpire=function(){L(this.storageKeys.SMARTLOOK_BAN_EXPIRE)},e.prototype.removeBanReason=function(){L(this.storageKeys.SMARTLOOK_BAN_REASON)},e.prototype.removeQueuedChunks=function(){L(this.storageKeys.SMARTLOOK_LS_QUEUED_CHUNKS)},e.prototype.removeSetupAfterExpire=function(){this.removeFromLocalStorageProjectMetadata(this.projectKey,"setupRetryAfter")},e.prototype.removeSetupAfterExpireReason=function(){this.removeFromLocalStorageProjectMetadata(this.projectKey,"setupRetryAfterReason")},e.prototype.setBanExpire=function(e){A(this.storageKeys.SMARTLOOK_BAN_EXPIRE,e)},e.prototype.setBanReason=function(e){A(this.storageKeys.SMARTLOOK_BAN_REASON,e)},e.prototype.setLocalStorageProjectMetadata=function(e,t){this.updateLocalStorageProjectMetadata(e,t)},e.prototype.setSetupRetryAfter=function(e){this.updateLocalStorageProjectMetadata(this.projectKey,{setupRetryAfter:e})},e.prototype.setSetupRetryAfterReason=function(e){this.updateLocalStorageProjectMetadata(this.projectKey,{setupRetryAfterReason:e})},e.prototype.convertDeprecatedLocalStorageData=function(){var e,t=k(this.storageKeys.SMARTLOOK_LS),r=t&&t.startsWith("{")&&t.endsWith("}"),n=k(this.storageKeys.SMARTLOOK_LEGACY_LS_KEY),o=k(this.storageKeys.SMARTLOOK_LEGACY_LS_VID),i=k(this.storageKeys.SMARTLOOK_LEGACY_SETUP_RETRY_AFTER),a=k(this.storageKeys.SMARTLOOK_LEGACY_SETUP_RETRY_AFTER_REASON),s=!1;if(!r&&t&&n&&o){var c=T(T({sessionId:t,visitorId:o},i&&{setupRetryAfter:i}),a&&{setupRetryAfterReason:a}),u=((e={})[n]=c,e);A(this.storageKeys.SMARTLOOK_LS,JSON.stringify(u)),s=!0}r||s||L(this.storageKeys.SMARTLOOK_LS),L(this.storageKeys.SMARTLOOK_LEGACY_LS_KEY),L(this.storageKeys.SMARTLOOK_LEGACY_LS_VID),L(this.storageKeys.SMARTLOOK_LEGACY_SETUP_RETRY_AFTER),L(this.storageKeys.SMARTLOOK_LEGACY_SETUP_RETRY_AFTER_REASON)},e.prototype.convertDeprecatedLocalStorageDataIfNeeded=function(){k(this.storageKeys.SMARTLOOK_LS)||this.convertDeprecatedLocalStorageData()},e}(),_=function(){function e(e){var t=e.projectKey,r=e.useCookies,n=e.storageKeys;this.cookieManager=new R(n,r),this.localStorageManager=new I(t,n)}return e.prototype.clearStorage=function(){this.localStorageManager.clearLocalStorage(),this.cookieManager.clearCookies()},e.prototype.getBanExpire=function(){return this.localStorageManager.getBanExpire()},e.prototype.getBanReason=function(){return this.localStorageManager.getBanReason()},e.prototype.getCookieMetadataForProjectKey=function(e){return this.cookieManager.getCookieMetadataForProjectKey(e)},e.prototype.getLocalStorageMetadataForProjectKey=function(e){return this.localStorageManager.getLocalStorageMetadataForProjectKey(e)},e.prototype.getQueuedChunks=function(){return this.localStorageManager.getQueuedChunks()},e.prototype.getSetupRetryAfterExpire=function(){return this.localStorageManager.getSetupRetryAfterExpire()},e.prototype.getSetupRetryAfterExpireReason=function(){return this.localStorageManager.getSetupRetryAfterExpireReason()},e.prototype.isRecorderInDebugMode=function(){return this.localStorageManager.isRecorderInDebugMode()},e.prototype.queueChunkToSend=function(e){return this.localStorageManager.queueChunkToSend(e)},e.prototype.removeBanExpire=function(){this.localStorageManager.removeBanExpire()},e.prototype.removeBanReason=function(){this.localStorageManager.removeBanReason()},e.prototype.removeQueuedChunks=function(){this.localStorageManager.removeQueuedChunks()},e.prototype.removeSetupAfterExpire=function(){this.localStorageManager.removeSetupAfterExpire()},e.prototype.removeSetupAfterExpireReason=function(){this.localStorageManager.removeSetupAfterExpireReason()},e.prototype.setBanExpire=function(e){this.localStorageManager.setBanExpire(e)},e.prototype.setBanReason=function(e){this.localStorageManager.setBanReason(e)},e.prototype.setMetadata=function(e,t){this.cookieManager.setCookieProjectMetadata(e,t),this.localStorageManager.setLocalStorageProjectMetadata(e,t)},e.prototype.setSetupRetryAfter=function(e){this.localStorageManager.setSetupRetryAfter(e)},e.prototype.setSetupRetryAfterReason=function(e){this.localStorageManager.setSetupRetryAfterReason(e)},e}(),C=function(){function e(){}return e.prototype.getServerTime=function(){if(void 0===this.lastServerTime||void 0===this.relativeTimeSinceLastServerTimeSet)throw new g.iF("Server time is undefined",{shouldReport:!0,additionalData:{lastServerTime:this.lastServerTime,relativeTimeSinceLastServerTimeSet:this.relativeTimeSinceLastServerTimeSet}});return new Date(this.lastServerTime.getTime()+performance.now()-this.relativeTimeSinceLastServerTimeSet)},e.prototype.getServerTimestamp=function(){return this.getServerTime().getTime()},e.prototype.setServerTime=function(e){this.lastServerTime=new Date(e),this.relativeTimeSinceLastServerTimeSet=performance.now()},e}(),M=function(){var e=this;this.scrollPositionsByElement=new WeakMap,this.getPosition=function(t){return e.scrollPositionsByElement.get(t)},this.setPosition=function(t,r){e.scrollPositionsByElement.set(t,r)}},P=function(){function e(e,t,r,n){var o=this;if(this.persistentStorageManager=e,this.startRecording=t,this.stopRecording=r,this.config=n,this.isRecordingStopped=!1,this.isAppliedBan(!0)){var a=this.persistentStorageManager.getBanExpire();if(a){var s=Number.parseInt(a,10)-Date.now();s>0&&(i.ZP.debug("BAN is applied. Waiting ".concat(s,"ms.")),this.banTimeoutId=setTimeout((function(){o.banTimeoutId=void 0,o.startRecording()}),s))}}}return e.prototype.applyBan=function(e){var t=this;if("hidden"!==document.visibilityState)if(this.config.isCrossOriginIframeMode){if(i.ZP.debug("Ban is not applied. Cross-origin mode detected."),!this.isRecordingStopped)try{this.stopRecording()}catch(e){}finally{this.isRecordingStopped=!0}}else{e.shouldReport&&(i.ZP.warnNoConsole('Applying ban. Reason: "'.concat(e.message,'".'),e),i.ZP.warn('Applying ban. Reason: "'.concat(e.message,'".'),e));var r=Date.now()+this.config.banTime;if(this.persistentStorageManager.setBanExpire(r.toString()),this.persistentStorageManager.setBanReason(e.message),void 0===this.banTimeoutId){if(!this.isRecordingStopped)try{this.stopRecording()}catch(e){}finally{this.isRecordingStopped=!0}}else clearTimeout(this.banTimeoutId);this.banTimeoutId=setTimeout((function(){t.banTimeoutId=void 0;try{t.startRecording()}catch(t){i.ZP.error("Cannot start recording after BAN expired",t,{banReason:e.message})}}),this.config.banTime)}},e.prototype.clearBanIfApplied=function(){this.persistentStorageManager.removeBanExpire(),this.persistentStorageManager.removeBanReason(),this.banTimeoutId&&clearTimeout(this.banTimeoutId)},e.prototype.getBanReason=function(){var e;return null!==(e=this.persistentStorageManager.getBanReason())&&void 0!==e?e:""},e.prototype.isAppliedBan=function(e){if(void 0===e&&(e=!1),!e)return void 0!==this.banTimeoutId;var t=this.persistentStorageManager.getBanExpire();return!!(t&&Number.parseInt(t,10)>Date.now())||(this.persistentStorageManager.removeBanExpire(),this.persistentStorageManager.removeBanReason(),!1)},e}(),K=o(665),D=o(600),x=function(){return x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x.apply(this,arguments)},j=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},N=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},B=function(){function e(e){var t=this;this.config=e,this.isSendingLogsDisabled=!1,this.logMessagesCache=new Map,this.logsToSend=[],this.uuid=(0,v.O)(),this.sendLog=function(e,r,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];if(r===i.in.ERROR||"internal"===e||"9f057cc507b88f90064ada490e5501390ec4e82e"===t.config.projectKey){var s=t.logMessagesCache.get(n),c=performance.now();if(t.logMessagesCache.set(n,c),void 0!==s&&c-s<1e3)return;t.logsToSend.push(t.createLog.apply(t,N([n,r],j(o),!1))),"hidden"===document.visibilityState&&t.processLogs()}},this.createLog=function(e,r){for(var n,o,a,s,c,u,l,d,f,p=[],y=2;y<arguments.length;y++)p[y-2]=arguments[y];var g=Object.fromEntries(p.map((function(e,t){return[t,JSON.parse((0,D.P)(e))]}))),v=t.config,h=(v.userId,function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(v,["userId"]));return{message:e,context:x({origin:null!==(n=window.location.origin)&&void 0!==n?n:"unknown",playUrl:null!==(o=window.smartlook.playUrl)&&void 0!==o?o:"unknown",visitorId:null!==(a=window.smartlook.visitorId)&&void 0!==a?a:"unknown",sessionId:null!==(s=window.smartlook.sessionId)&&void 0!==s?s:"unknown",recordId:null!==(c=window.smartlook.recordId)&&void 0!==c?c:"unknown",uuid:t.uuid,url:null!==(l=null===(u=window.location)||void 0===u?void 0:u.href)&&void 0!==l?l:"unknown",userAgent:null!==(f=null===(d=window.navigator)||void 0===d?void 0:d.userAgent)&&void 0!==f?f:"unknown",referrer:document.referrer,datadogHost:t.config.managerHost,visibilityState:document.visibilityState,config:h,apiCallHistory:window.smartlook._apiCallsHistory,isIframe:window.top!==window,isWindowOpened:null!==window.opener},g),severity:i.jj[r],tags:{},timestamp:Date.now()}},this.handleError=function(e){e.error instanceof g.iF&&e.error.shouldReport&&(t.logsToSend.push(t.createLog("Uncaught error: ".concat(e.error),i.in.ERROR,e.error)),"hidden"===document.visibilityState&&t.processLogs())},this.handlePromiseRejection=function(e){var r;if(e.reason instanceof g.iF&&e.reason.shouldReport){if("string"==typeof(null===(r=e.reason.additionalData)||void 0===r?void 0:r.message)&&(e.reason.additionalData.message.includes("Cannot set properties of undefined (setting 'sessionManager')")||e.reason.additionalData.message.includes("undefined is not an object (evaluating 'this.sessionManager=e')")||e.reason.additionalData.message.includes("this is undefined")||e.reason.additionalData.message.includes("Unable to set property 'sessionManager' of undefined or null reference")))return;t.logsToSend.push(t.createLog("Unhandled promise rejection: ".concat(e.reason),i.in.ERROR,e.reason)),"hidden"===document.visibilityState&&t.processLogs()}},this.processLogIntervalId=setInterval((function(){t.processLogs()}),this.config.uploadInterval),window.addEventListener("error",this.handleError,!0),window.addEventListener("unhandledrejection",this.handlePromiseRejection,!0),document.addEventListener("visibilitychange",(function(e){(0,K.$)(e)&&"hidden"===document.visibilityState&&(t.processLogs(),setTimeout((function(){t.processLogs()}),500))}),!0)}return e.prototype.processLogs=function(){return e=this,r=function(){var e,t,r,n;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(o){switch(o.label){case 0:if(this.isSendingLogsDisabled)return[2];if(!(this.logsToSend.length>0))return[3,7];e=this.logsToSend,this.logsToSend=[],t={tags:{platform:"web",sdkVersion:this.config.recorderVersion,userAgent:navigator.userAgent},logs:e},o.label=1;case 1:return o.trys.push([1,6,,7]),"visible"!==document.visibilityState?[3,3]:[4,(0,c.jq)({datadogHost:this.config.managerHost,payload:t,projectKey:this.config.projectKey})];case 2:return o.sent(),[3,5];case 3:return[4,(0,c.x2)({datadogHost:this.config.managerHost,payload:t,projectKey:this.config.projectKey})];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return(r=o.sent())instanceof u.M&&(422===r.status||404===r.status)?this.isSendingLogsDisabled=!0:(n=this.logsToSend).push.apply(n,N([],j(e),!1)),[3,7];case 7:return[2]}}))},new((t=void 0)||(t=Promise))((function(n,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}));var e,t,r},e}(),U=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},F=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Z=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},G=function(e){var t=this;this.projectKey=e,this.discoveredIframeWindows=new Set,this.eventListenersByEventType=new Map,this.isClosed=!1,this.pendingEventsByMessageEventSource=new Map,this.waitingListenersByEventType=new Map,this.waitingListenersByEventTypeByMessageEventSource=new Map,this.addPostMessageEventListener=function(e,r){var n=t.eventListenersByEventType.get(e);n?n.push(r):t.eventListenersByEventType.set(e,[r])},this.broadcastEventToAllDiscoveredIframes=function(e){t.discoveredIframeWindows.forEach((function(t){t.postMessage(e,"*")}))},this.clearDiscoveredIframeWindows=function(){t.discoveredIframeWindows.clear()},this.close=function(){t.isClosed=!0},this.isTherePendingEvent=function(e,r){var n,o=t.pendingEventsByMessageEventSource.get(r);if(o){var a=(null!==(n=o.get(e))&&void 0!==n?n:[]).filter((function(t){return t.name===e}));if(a.length>0)return a.length>1&&i.ZP.warn("Received multiple events. Taking first received."),!0}return!1},this.sendEventToSource=function(e,t){i.ZP.debug("Sending ".concat(e.name," event to different source."),e),t.postMessage(e,"*")},this.waitForEventFromAnySource=function(e){return U(t,void 0,void 0,(function(){var t,r,n,o,a,s,c,u,l,d,f;return F(this,(function(p){switch(p.label){case 0:try{for(t=Z(this.pendingEventsByMessageEventSource.values()),r=t.next();!r.done;r=t.next())if(n=r.value,o=null!==(f=n.get(e))&&void 0!==f?f:[],(a=o.filter((function(t){return t.name===e}))).length>0)return a.length>1&&i.ZP.warn("Received multiple events. Taking first received."),n.set(e,o.filter((function(t){return t.name!==e}))),[2,a[0]]}catch(e){l={error:e}}finally{try{r&&!r.done&&(d=t.return)&&d.call(t)}finally{if(l)throw l.error}}return void 0===(s=this.waitingListenersByEventType.get(e))&&(s=[],this.waitingListenersByEventType.set(e,s)),[4,new Promise((function(e){s&&(c=e,s.push(e))}))];case 1:return u=p.sent(),c&&(i.ZP.debug('Removing event listener for "'.concat(e,'".')),this.waitingListenersByEventType.set(e,s.filter((function(e){return e!==c})))),[2,u]}}))}))},this.waitForEventFromSource=function(e,r){return U(t,void 0,void 0,(function(){var t,n,o,a,s,c;return F(this,(function(u){switch(u.label){case 0:return(t=this.pendingEventsByMessageEventSource.get(r))&&(n=null!==(c=t.get(e))&&void 0!==c?c:[],(o=n.filter((function(t){return t.name===e}))).length>0)?(o.length>1&&i.ZP.warn("Received multiple events. Taking first received."),t.set(e,n.filter((function(t){return t.name!==e}))),[2,o[0]]):(void 0===(a=this.waitingListenersByEventTypeByMessageEventSource.get(r))&&(a=new Map,this.waitingListenersByEventTypeByMessageEventSource.set(r,a)),[4,new Promise((function(t){if(void 0===a)throw new g.iF("listenersByWindow is undefined");a.set(e,t)}))]);case 1:return s=u.sent(),a.delete(e),[2,s]}}))}))},this.waitForEventFromSourceOrThrowAfterGivenTime=function(e,r,n){void 0===n&&(n=1e4);var o=t.waitForEventFromSource(e,r),i=new Promise((function(t,r){setTimeout((function(){r(new g.Fx("Could not retrieve event ".concat(e," in given time (").concat(n,"ms)."),{shouldReport:!1}))}),n)}));return Promise.race([o,i])},this.postMessageEventListener=function(e){var r,n;if((0,K.$)(e)){var o=e.data;if((0,y.ot)(o)&&e.source){var a=e.source;if(o.key!==t.projectKey)return void i.ZP.debug("Received event with different key.",e);(0,y.LT)(o)&&!t.isClosed&&(i.ZP.debug("Received discovery. Sending discovered response",e),t.sendEventToSource({name:y.lL.DISCOVERED,key:t.projectKey,sessionId:window.smartlook.sessionId},a)),(0,y.hd)(o)&&!t.isClosed&&(i.ZP.debug("Received discovered. Sending acknowledged response",e),t.sendEventToSource({name:y.lL.ACKNOWLEDGED,key:t.projectKey},a),t.discoveredIframeWindows.add(e.source));var s=t.eventListenersByEventType.get(o.name);if(s){i.ZP.debug("Found listeners for event - ".concat(e.data.name,"."),e);try{for(var c=Z(s),u=c.next();!u.done;u=c.next())(0,u.value)(e.data)}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}var l=t.waitingListenersByEventTypeByMessageEventSource.get(e.source);if(l){var d=l.get(o.name);d&&(i.ZP.debug("Found waiting listener for event - ".concat(o.name,".")),d(o))}var f=t.waitingListenersByEventType.get(o.name);if(f&&f.length>0&&(i.ZP.debug("Found waiting listener from any source for event - ".concat(o.name,".")),f.forEach((function(e){return e(o)}))),l||s||f&&f.length>0)return;i.ZP.debug("No pending listener found for ".concat(o.name,"."));var p=t.pendingEventsByMessageEventSource.get(e.source);if(p){var g=p.get(o.name);g?(g.push(o),p.set(o.name,g)):p.set(o.name,[o])}else{var v=new Map;v.set(o.name,[o]),t.pendingEventsByMessageEventSource.set(e.source,v)}}}},window.addEventListener("message",this.postMessageEventListener)},Y=function(e){var t=this;this.persistentStorageManager=e,this.applyRetryAfter=function(e){var r=Date.now()+1e3*e;t.persistentStorageManager.setSetupRetryAfter(r.toString())},this.getAppliedRetryAfterReason=function(){return t.persistentStorageManager.getSetupRetryAfterExpireReason()},this.isAppliedRetryAfter=function(){var e=t.persistentStorageManager.getSetupRetryAfterExpire();return e&&Number.parseInt(e,10)>Date.now()?!(Number.parseInt(e,10)-Date.now()>6048e5&&(i.ZP.errorNoConsole("Value of `setupRetryAfterExpire` is greater than one week. Ignoring it.",{currentTime:Date.now(),currentTimeISO:(new Date).toISOString(),setupRetryAfterExpire:e}),t.removeRetryAfterValues(),1)):(t.removeRetryAfterValues(),!1)},this.removeRetryAfterValues=function(){t.persistentStorageManager.removeSetupAfterExpireReason(),t.persistentStorageManager.removeSetupAfterExpire()},this.setAppliedRetryAfterReason=function(e){t.persistentStorageManager.setSetupRetryAfterReason(e)}},J=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},H=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},W=function(e,t,r){for(var n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];return c=function(){var o,s,c,u,l,d,f,p,y,v,h,m,w;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(b){switch(b.label){case 0:if(b.trys.push([0,24,,25]),r&&r.isCrossOriginIframeMode&&("string"!=typeof e||["track","properties","navigation","error"].includes(e)||console.debug("Smartlook is loaded in iframe. Calling '".concat(e,"' API in iframe is disabled. Please call it in parent page."))),"finish"===e)return o=n,window.smartlook.recorder?(c=window.smartlook.recorder).finishAllQueuedTasks.apply(c,H([],J(n),!1)):o[0](),[2];if("stop"===e)return window.smartlook.recorder&&(u=window.smartlook.recorder).stopRecording.apply(u,H([],J(n),!1)),[2];if(t.isAppliedBan())return i.ZP.warn("Cannot call smartlook API. Session is banned. Reason: ".concat(t.getBanReason(),".")),[2];if(!window.smartlook.recorder)return i.ZP.warn("Smartlook is not initialized. Cannot call public api."),[2];switch(e){case"record":return[3,1];case"resume":return[3,3];case"pause":return[3,5];case"error":return[3,6];case"track":return[3,8];case"navigation":return[3,10];case"disable":return[3,12];case"properties":return[3,16];case"identify":return[3,18];case"anonymize":return[3,20]}return[3,22];case 1:return[4,(l=window.smartlook.recorder).setRecording.apply(l,H([],J(n),!1))];case 2:return b.sent(),[3,23];case 3:return[4,(d=window.smartlook.recorder).resumeRecording.apply(d,H([],J(n),!1))];case 4:return b.sent(),[3,23];case 5:return(f=window.smartlook.recorder).pauseRecording.apply(f,H([],J(n),!1)),[3,23];case 6:return[4,(p=window.smartlook.recorder).logCustomError.apply(p,H([],J(n),!1))];case 7:return b.sent(),[3,23];case 8:return[4,(y=window.smartlook.recorder).logCustomEvent.apply(y,H([],J(n),!1))];case 9:return b.sent(),[3,23];case 10:return[4,(v=window.smartlook.recorder).changeUrl.apply(v,H([],J(n),!1))];case 11:return b.sent(),[3,23];case 12:return!0!==n[0]?[3,13]:(window.smartlook.recorder.pauseRecording(),[3,15]);case 13:return!1!==n[0]?[3,15]:[4,window.smartlook.recorder.resumeRecording()];case 14:b.sent(),b.label=15;case 15:return[3,23];case 16:return[4,(h=window.smartlook.recorder).setCustomEventProperties.apply(h,H([],J(n),!1))];case 17:return b.sent(),[3,23];case 18:return[4,(m=window.smartlook.recorder).identifyVisitor.apply(m,H([],J(n),!1))];case 19:return b.sent(),[3,23];case 20:return[4,(w=window.smartlook.recorder).anonymize.apply(w,H([],J(n),!1))];case 21:return b.sent(),[3,23];case 22:return"function"==typeof e?e():a.N('"'.concat(e,'" is not recognised by Smartlook. See available APIs at https://web.developer.smartlook.com/docs')),[3,23];case 23:return[3,25];case 24:return(s=b.sent())instanceof g.iF&&!s.shouldReport?i.ZP.warn(s.message):s instanceof Error?console.warn(s.message,s):console.error(JSON.stringify(s)),[3,25];case 25:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(r,n)}o((c=c.apply(void 0,[])).next())}));var s,c},V=function(){return V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)},q=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},z=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Q=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},X=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};o.p=null===document.currentScript?window.smartlook.scriptSource+"es6/":window.smartlook.scriptSource+"es5/";var $,ee,te,re,ne,oe,ie,ae,se,ce,ue,le=!1,de=!1,fe=!0,pe=[],ye=[],ge=!1,ve=!1,he=0,me=!1,we=!1,be=!1,Se=performance.now(),Oe=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return q(void 0,void 0,void 0,(function(){var r,E,R,k,A,L,T,I,K,D,x,j,N,U,F,Z,J,H,Ee,Re,ke,Ae,Le,Te,Ie,_e,Ce,Me,Pe,Ke,De,xe,je;return z(this,(function(Ne){switch(Ne.label){case 0:if(function(e){void 0===window.smartlook._apiCallsHistory&&(window.smartlook._apiCallsHistory=[]),window.smartlook._apiCallsHistory.push(["function"==typeof e?"function":e,performance.now()-Se]),window.smartlook._apiCallsHistory.length>15&&window.smartlook._apiCallsHistory.shift()}(e),window.navigator.userAgent.includes("BingPreview")||window.navigator.userAgent.includes("adidxbot")||window.navigator.userAgent.includes("Bingbot"))return a.N("Smartlook is disabled. Bot detected."),[2];if("init"===e&&he<1||"reinit"===e){if(ue=t[0],ce=null!==(Me=t[1])&&void 0!==Me?Me:{},"string"==typeof ue&&(ue=ue.trim()),void 0===ue||"string"==typeof ue&&0===ue.length)return a.N("Smartlook could not be initialized. Provided project key is empty."),"reinit"===e&&(me=!1),[2];if(se=function(e,t,r){var n=Object.assign(p,d(d({},r),{projectKey:e,recorderVersion:"v1.64.5-3-g9931a0ef"}));if(r.host){n.managerHost=n.host;var o=l.u(r.host);(!o.host.endsWith("smartlook.cloud")&&!o.host.endsWith("smartlook.com")||o.host.endsWith("smartlook.cloud")&&o.host.includes("relay-proxy"))&&(n.managerHost=new URL("/manager",o).toString(),n.isRelayProxy=!0)}else if(r.region){var i=f[r.region];if(void 0===i)throw new Error("Unknown region");n.host=i,n.managerHost=i}return"f2353f89c956e0b7a93a0ab1b5cfbf01725acab2"===e&&(n.host=f.us,n.managerHost=f.us),n.packAssetsToRecording&&(n.packAssets={images:!0,styles:!0,fonts:!0}),"9f057cc507b88f90064ada490e5501390ec4e82e"===e&&(n.packAssets={imageQuality:.8,images:!0,styles:!0,fonts:!0},n.record={emails:!0,forms:!0,numbers:!0,ips:!0},n.enableRecordingOfAutomationFrameworks=!0,n.startRecordingAfterUserActivity=!1),["b0375d591e85b0affec1d581bfed3c760cb8c56d","ff68798c802965f6c79ab4a4f317fe02e778c847","263616316fc439f9ca1bfc939d7841ab0b310a19","57cac5996e97c209eb339793b7a1977c2ee9177d","2a5a223d674a1920334b75bb26b7a13ad2662dc3"].includes(e)&&(n.fallbackToAlternativeIds=!0),n}(ue,0,null!=ce?ce:{}),!se.enableRecordingOfAutomationFrameworks&&navigator.webdriver)return a.N("Smartlook is stopped. Automation framework is detected."),[2];if(!be){!function(e){Object.defineProperties(window.smartlook,{playUrl:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook.playUrl:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.playUrl}catch(e){i.ZP.debug("Cannot get playUrl: ".concat(e))}}},sessionId:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook.sessionId:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.sessionId}catch(e){i.ZP.debug("Cannot get sessionId: ".concat(e))}}},visitorId:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.top&&window.top.smartlook?window.top.smartlook.visitorId:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.visitorId}catch(e){i.ZP.debug("Cannot get visitorId: ".concat(e))}}},recordId:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook.recordId:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.recordId}catch(e){i.ZP.debug("Cannot get recordId: ".concat(e))}}},key:{get:function(){try{return e.projectKey}catch(e){i.ZP.debug("Cannot get key: ".concat(e))}}},version:{get:function(){return e.recorderVersion}},_debugData:{get:function(){var t;try{return void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)&&window.parent&&window.parent.smartlook?window.parent.smartlook._debugData:null===(t=window.smartlook.recorder)||void 0===t?void 0:t.debugData}catch(e){i.ZP.debug("Cannot get _debugData: ".concat(e))}}},isIframeModeEnabled:{get:function(){return e.isCrossOriginIframeMode||void 0===window.smartlook.recorderClass&&b()&&S(e.projectKey)}}})}(se),ge||(r=function(e,t){var r,n=new _({projectKey:e.projectKey,useCookies:e.cookies,storageKeys:e.storageKeys}),o=new C,a=new M,s=new P(n,(function(){return window.smartlook("reinit",e.projectKey,t)}),(function(){return window.smartlook("stop")}),e);e.externalLogging&&(r=new B(e)),i.ZP.setLoggingLevel(n.isRecorderInDebugMode()?i.in.DEBUG:e.loggingLevel);var c=new G(e.projectKey);return r&&i.ZP.setMiddleware(r.sendLog),{banService:s,persistentStorageManager:n,postMessageService:c,scrollManager:a,setupRetryAfterService:new Y(n),timeManager:o}}(se,ce),oe=r.persistentStorageManager,re=r.banService,ie=r.timeManager,ae=r.scrollManager,te=r.postMessageService,ne=r.setupRetryAfterService,ge=!0),be=!0,E=oe.getQueuedChunks();try{E&&function(e){0!==e.length&&requestIdleCallback((function(){var t,r,n=function(e){var t,r,n=new FormData;try{for(var o=(t=void 0,m(Object.entries(e.apiData))),a=o.next();!a.done;a=o.next()){var s=w(a.value,2),u=s[0],l=s[1],d=JSON.stringify(l);n.append(u,d)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}i.ZP.debug("Writing queued chunk.",{chunk:e}),(0,c.iY)({formData:n,writerHost:e.writerHost,sessionId:e.apiData.sessionData.id,recordId:e.apiData.recordData.id,visitorId:e.apiData.visitorData.id,isFromPreviousRecord:!0}).catch((function(t){i.ZP.debug("Writing queued chunk failed.",{error:t,chunk:e})}))};try{for(var o=m(e),a=o.next();!a.done;a=o.next())n(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}))}(E)}catch(e){i.ZP.errorNoConsole("Sending queued chunks failed.")}finally{oe.removeQueuedChunks()}}}return ue&&b()?(i.ZP.debug("Smartlook loaded in parent window."),le?(i.ZP.debug("Smartlook is already initialized in iframe. No API calls will be proxied."),[3,4]):[3,1]):[3,4];case 1:return S(ue)?(i.ZP.debug("Detected smartlook in parent window. API calls 'navigate', 'track', 'properties', 'navigation' and 'error' will be proxied there. All the other will be silently ignored."),"string"==typeof e&&["track","properties","navigation","error"].includes(e)?(i.ZP.debug("Sending API call ".concat(e," to parent window.")),[2,null===(Pe=window.top)||void 0===Pe?void 0:Pe.smartlook.apply(Pe,X([e],Q(t),!1))]):"init"===e?(i.ZP.debug("Smartlook in parent window is initialized and records to same project."),R=X([],Q(ye),!1),ye=[],queueMicrotask((function(){R.forEach((function(e){var t=Q(e,3),r=t[0],n=t[1],o=t[2];Oe.apply(void 0,X([r],Q(o),!1)).finally(n)}))})),[2]):(console.debug("Smartlook is loaded in same-origin iframe. Calling '".concat(e,"' API in iframe is disabled. Please call it in parent page.")),[2])):[3,2];case 2:return"init"!==e?[3,4]:(i.ZP.debug("Waiting for smartlook in parent window to initialize."),[4,(Be=void 0,Ue=function(){var e;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){e=setInterval((function(){var r,n;void 0!==(null===(n=null===(r=window.parent)||void 0===r?void 0:r.smartlook)||void 0===n?void 0:n.key)&&(void 0!==e&&(clearInterval(e),e=void 0),t())}),100)}))];case 1:return t.sent(),[2]}}))},new(Be||(Be=Promise))((function(e,t){function r(e){try{o(Ue.next(e))}catch(e){t(e)}}function n(e){try{o(Ue.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof Be?o:new Be((function(e){e(o)}))).then(r,n)}o((Ue=Ue.apply(void 0,[])).next())})))]);case 3:if(Ne.sent(),S(ue))return i.ZP.debug("Smartlook in parent window is initialized and records to same project."),k=X([],Q(ye),!1),ye=[],queueMicrotask((function(){k.forEach((function(e){var t=Q(e,3),r=t[0],n=t[1],o=t[2];Oe.apply(void 0,X([r],Q(o),!1)).finally(n)}))})),[2];i.ZP.debug("Smartlook in parent window is initialized but records to different project."),Ne.label=4;case 4:return"visitor_blocked"!==ee||!se||"identify"!==e||we?[3,6]:(we=!0,A=Q(t,1),"string"!=typeof(L=A[0])&&"number"!=typeof L||"string"==typeof L&&!L?(a.N("Invalid user id passed to smartlook('identify', ...). Received: ".concat(L)),we=!1,[2]):(T=new Promise((function(r){ye.unshift([e,r,t]),ye.unshift.apply(ye,X([],Q(pe),!1))})).finally((function(){we=!1})),void 0===ue||void 0===ce?(i.ZP.error("Cannot run reinit. Project key or init options are not defined.",{projectKey:ue,initOptions:ce}),[2]):[4,Oe("reinit",ue,V(V({},ce),{userId:String(L)}))]));case 5:return Ne.sent(),[2,T];case 6:return["init","finish","reinit"].includes(e)||le&&!me?"init"!==e&&"reinit"!==e?[3,31]:void 0===se?(i.ZP.warn("Config is undefined."),[2]):("reinit"===e&&(me=!0),"init"===e&&(he+=1),he>1?("string"==typeof(I=t[0])&&I.trim()!==se.projectKey?a.N("Smartlook init method called twice with different project keys (".concat(se.projectKey,", ").concat(I.trim(),").")):i.ZP.debug("Init called ".concat(he,"x times. Skipping initialization.")),"reinit"===e&&(me=!1),[2]):(i.ZP.debug("Init called."),K=t[2],re.isAppliedBan()?(i.ZP.debug("BAN is applied. Initialization is postponed."),K&&K(),"reinit"===e&&(me=!1),[2]):(s.MN()||se.standalone)&&se.startRecordingAfterUserActivity?[4,(0,O.X)(te)]:[3,8])):[2,new Promise((function(r){ye.push([e,r,t])}))];case 7:Ne.sent(),Ne.label=8;case 8:return!s.PJ()||s.Yp()||null===window.top||!1!==se.standalone?[3,12]:(re.clearBanIfApplied(),[4,(Fe=se,Ze=window.top,q(void 0,void 0,void 0,(function(){var e;return z(this,(function(t){switch(t.label){case 0:i.ZP.debug("Sending discovered event to parent window event.",window.location.href),te.sendEventToSource({name:y.lL.DISCOVERED,key:Fe.projectKey,sessionId:void 0},window.parent),t.label=1;case 1:return t.trys.push([1,4,,5]),i.ZP.debug("Waiting for acknowledged event from parent.",window.location.href),[4,te.waitForEventFromSourceOrThrowAfterGivenTime(y.lL.ACKNOWLEDGED,window.parent)];case 2:return t.sent(),(0,O.X)().then((function(){void 0!==se&&(i.ZP.debug("Sending user activity event to parent.",window.location.href),te.sendEventToSource({name:y.lL.USER_ACTIVITY,key:se.projectKey},window.parent))})),i.ZP.debug("Waiting for start recording event from parent.",window.location.href),[4,te.waitForEventFromSource(y.lL.START_RECORDING,Ze)];case 3:return[2,t.sent()];case 4:return(e=t.sent())instanceof g.Fx&&(i.ZP.debug("Could not receive post message in `init`. Timeout exceeded.",window.location.href),te.close()),i.ZP.warn("Error happened during receiving post message from parent in `init`. Continuing normal recording.",e,window.location.href,document.visibilityState),[3,5];case 5:return[2]}}))})))]);case 9:return(n=Ne.sent())?(se.isCrossOriginIframeMode=!0,i.ZP.debug("Received start recording event",n,window.location.href),i.ZP.debug("Attaching START_RECORDING event listener.",window.location.href),te.addPostMessageEventListener(y.lL.START_RECORDING,(function(e){var t;if(!se)throw new g.iF("Config is undefined",{shouldReport:!0});se.isCrossOriginIframeMode=!0;try{null===(t=window.smartlook.recorder)||void 0===t||t.startRecording(e.sessionId,e.visitorId,e.recordId,e.setupData,void 0,{frameElementId:e.frameElementId,parentFrameElementId:e.parentFrameElementId,relativeParentTimeStart:e.relativeTime,frameMetadata:e.frameMetadata})}catch(e){i.ZP.errorNoConsole("Coudl not startRecording in cross-origin iframe",e)}})),i.ZP.debug("Attaching STOP_RECORDING event listener."),te.addPostMessageEventListener(y.lL.STOP_RECORDING,(function(){var e;try{null===(e=window.smartlook.recorder)||void 0===e||e.stopRecording()}catch(e){if(e instanceof g.zT)return;throw e}})),[3,12]):[3,10];case 10:return[4,(0,O.X)()];case 11:Ne.sent(),Ne.label=12;case 12:return D=(0,h.KB)(se,oe),x=void 0,j=void 0,N=void 0,U=void 0,F=void 0,void 0!==n?[3,14]:[4,(0,h.dD)(D,se,oe)];case 13:return Z=Ne.sent(),x=Z.sessionId,j=Z.visitorId,N=(0,v.O)(),U=Z.sessionTimeRemaining,[3,15];case 14:x=n.sessionId,j=n.visitorId,N=n.recordId,F={frameElementId:n.frameElementId,parentFrameElementId:n.parentFrameElementId,relativeParentTimeStart:n.relativeTime,frameMetadata:n.frameMetadata},Ne.label=15;case 15:J=void 0,Ne.label=16;case 16:if(Ne.trys.push([16,28,29,30]),!ne.isAppliedRetryAfter()||we)return[3,17];if(Ie=ne.getAppliedRetryAfterReason(),fe=!1,$="setup call is throttled",ee="spamming_visitor",Ie)try{(H=JSON.parse(Ie)).code&&(ee=H.code),H.message&&($=H.message)}catch(e){}return a.N("Smartlook not recording. Reason: ".concat($,".")),[3,27];case 17:return n?(Re={setupData:n.setupData,response:void 0},[3,20]):[3,18];case 18:return[4,(0,c.O5)({config:se,sessionId:x,visitorId:j})];case 19:Re=Ne.sent(),Ne.label=20;case 20:if(!(J=(Ee=Re).setupData).recordingAllowed)return[3,26];if(ne.removeRetryAfterValues(),oe.setMetadata(se.projectKey,{sessionId:x,visitorId:j}),ie.setServerTime(J.serverTime),fe=!0,ee=void 0,$=void 0,de)return[3,25];Ne.label=21;case 21:return Ne.trys.push([21,23,,24]),[4,o.e(296).then(o.bind(o,62))];case 22:return Ne.sent(),[3,24];case 23:return(ke=Ne.sent())instanceof Error&&ke.message.includes("is not a function")?a.N("Smartlook could not be initialized. This site uses unsupported version of Prototype.JS library which contains some bugs. We advise you to upgrade to latest version in order to make smartlook recording. For more information do not hesitate to contact our customer support."):a.N("Could not load smartlook bundle. Smartlook will not record this page.",{error:ke}),ve=!0,[3,24];case 24:ve||(function(e,t,r,n,o,i,a){if(void 0===window.smartlook.recorderClass)throw new g.iF("Cannot initialize Smartlook. Smartlook class is not present.");window.smartlook.recorder=new window.smartlook.recorderClass(e,t,r,n,o,i,a)}(se,oe,ne,re,ie,te,ae),de=!0),Ne.label=25;case 25:return ve||(void 0!==U&&U<J.recording.maxRecordDuration/3&&(x=(0,v.O)()),null===(Ke=window.smartlook.recorder)||void 0===Ke||Ke.startRecording(x,j,N,J,U,F)),[3,27];case 26:Ae=Ee.response,(Le=null==Ae?void 0:Ae.headers.get("Retry-After"))&&(ne.applyRetryAfter(Number.parseInt(Le,10)),ne.setAppliedRetryAfterReason(JSON.stringify(J.error))),fe=!1,$=null===(De=J.error)||void 0===De?void 0:De.message,ee=null===(xe=J.error)||void 0===xe?void 0:xe.code,(null===(je=J.error)||void 0===je?void 0:je.message)?a.N("Smartlook not recording. Reason: ".concat(J.error.message,".")):a.N("Smartlook not recording."),Ne.label=27;case 27:return[3,30];case 28:return Te=Ne.sent(),Ie=Te instanceof Error?Te.message:"Unknown reason /setup",Te instanceof u.M?(_e=Te.isAbortedByUserAgent&&"hidden"===Te.visibilityState,[404,422].includes(Te.status)?(fe=!1,Te.responseData&&"string"!=typeof Te.responseData?($="string"==typeof Te.responseData.message?Te.responseData.message:"Unknown reason",ee="string"==typeof Te.responseData.code?Te.responseData.code:"unknown_code"):($="Unknown reason",ee="unknown_code"),a.N("Smartlook not recording. Reason: ".concat($),Te.responseData),i.ZP.warnNoConsole("Setup failed. Reason: ".concat(Ie,"."),Te,fetch.toString())):_e||re.applyBan(new g.iF("Setup in init failed. Reason: ".concat(Ie,"."),{originalError:Te,shouldReport:!Te.isConnectionError}))):Te instanceof Error&&(Te.message.includes("Cannot set properties of undefined (setting 'sessionManager')")||Te.message.includes("undefined is not an object (evaluating 'this.sessionManager=e')")||Te.message.includes("this is undefined")||Te.message.includes("Unable to set property 'sessionManager' of undefined or null reference"))?(ve=!0,a.N("Smartlook could not be initialized. This site uses unsupported version of Prototype.JS library which contains some bugs. We advise you to upgrade to latest version in order to make smartlook recording. For more information do not hesitate to contact our customer support.")):re.applyBan(new g.iF('Setup in init failed. Reason: "'.concat(Ie,'".'),{originalError:Te instanceof Error?Te:void 0})),[3,30];case 29:return le=!0,[7];case 30:return"reinit"===e&&(me=!1),Ce=X([],Q(ye),!1),ye=[],queueMicrotask((function(){Ce.forEach((function(e){var t=Q(e,3),r=t[0],n=t[1],o=t[2];Oe.apply(void 0,X([r],Q(o),!1)).finally(n)}))})),K&&K(),[2];case 31:return fe||"finish"===e?ve?(i.ZP.debug("Cannot call ".concat(e,". Bundle failed to load.")),[2]):[3,32]:(i.ZP.warn("Cannot call ".concat(e,". Recording is disabled. Reason ").concat(null!=$?$:"unknown",".")),"visitor_blocked"===ee&&pe.push([e,function(){return null},t]),[2]);case 32:return[4,W.apply(void 0,X([e,re,se],Q(t),!1))];case 33:Ne.sent(),Ne.label=34;case 34:return[2]}var Be,Ue,Fe,Ze}))}))},Ee=null!==(t=null===(e=window.smartlook)||void 0===e?void 0:e.api)&&void 0!==t?t:[],Re=null===(r=window.smartlook)||void 0===r?void 0:r.isRecorderScriptLoaded,ke=window.smartlook.scriptSource;window.smartlook=Oe,window.smartlook.isRecorderScriptLoaded=Re,window.smartlook.scriptSource=ke,Ee.forEach((function(e){var t=Q(X([],Q(e),!1)),r=t[0],n=t.slice(1);window.smartlook.apply(window,X([r],Q(n),!1))}))}()}();